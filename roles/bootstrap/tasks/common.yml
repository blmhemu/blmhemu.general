---

- name: Ensure locale exists
  become: true
  community.general.locale_gen:
    name: "{{ bootstrap_locale }}"
    state: present

- name: Set hostname
  become: true
  hostname:
    name: "{{ bootstrap_hostname }}"
  notify: reboot device

- name: Create group
  become: true
  ansible.builtin.group:
    name: "{{ bootstrap_group }}"
    gid: "{{ bootstrap_gid }}"

- name: Create user and assign group
  ansible.builtin.user:
    name: "{{ bootstrap_user }}"
    uid: "{{ bootstrap_uid }}"
    group: "{{ bootstrap_group }}"
    shell: "{{ bootstrap_login_shell }}"
    create_home: true
